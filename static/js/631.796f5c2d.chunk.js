"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[631],{9232:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Ce});var i=t(7313),n=t(2135),a=t(232),o=t(4616),r=t(2805),l=t(6552),c=t(794),d=t(6417);class h extends i.PureComponent{constructor(e){super(e),(0,o.f3)(this,"UserUtilsService")}getDescription(e,s){let t,i=e;return"object"===typeof e&&(t=e.id,i=e.text),(0,d.jsxs)("li",{children:[!!t&&(0,d.jsxs)(c.Z,{href:`https://github.com/shridhar-tl/jira-assistant/issues/${t}`,children:["#",t," - "]}),i]},s)}render(){const{updates:e}=this.props;return(0,d.jsx)("div",{className:"release-history",children:e.map(((e,s)=>(0,d.jsxs)("div",{className:"release",children:[(0,d.jsx)("span",{className:"version-no",children:e.version}),e.publishDate&&(0,d.jsxs)("span",{children:[" (published: ",(0,d.jsx)("b",{children:this.$userutils.formatDate(e.publishDate)}),")"]}),!e.publishDate&&e.expectedOn&&(0,d.jsxs)("span",{children:[" (expected: ",(0,d.jsx)("b",{children:this.$userutils.formatDate(e.expectedOn)}),")"]}),e.availableNow&&(0,d.jsx)("span",{className:"badge badge-"+(e.isBeta?"warning":"success"),title:"Download this version from web store",children:"now available"}),(0,d.jsx)("span",{className:"changelog-header",children:"Changelog:"}),(0,d.jsx)("ul",{className:"changelogs",children:e.whatsnew.map(this.getDescription)}),e.bugs&&e.bugs.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"changelog-header",children:"Bugs:"}),(0,d.jsx)("ul",{className:"changelogs",children:e.bugs.map(this.getDescription)})]})]},s)))})}}const u=h;var m=t(4074),p=t(3972);class x extends i.PureComponent{constructor(e){super(e),this.showEditor=()=>this.setState({showEditor:!0}),this.hideDialog=()=>this.setState({showEditor:!1}),this.trackerUpdated=e=>{this.context.setUpdates(e),this.hideDialog()},(0,o.f3)(this,"UserUtilsService"),this.state={showEditor:!1}}render(){const e=this.context.getElapsedTimeInSecs();return e?(0,d.jsxs)("div",{className:"timer-ctl",children:[(0,d.jsx)(c.Z,{className:"ticket-no link",href:this.$userutils.getTicketUrl(e.key),children:e.key}),(0,d.jsx)(f,{isRunning:e.isRunning,lapse:e.lapse,title:e.description},`${e.key}_${e.isRunning?"R":"S"}`),!e.isRunning&&(0,d.jsx)("span",{className:"fa fa-play",title:"Resume time tracking",onClick:this.context.resumeTimer}),e.isRunning&&(0,d.jsx)("span",{className:"fa fa-pause",title:"Pause time tracking",onClick:this.context.pauseTimer}),(0,d.jsx)("span",{className:"fa fa-stop",title:"Stop time tracking and create worklog entry",onClick:this.context.stopTimer}),(0,d.jsx)("span",{className:"fa fa-edit",title:"Edit working comment",onClick:this.showEditor}),this.state.showEditor&&(0,d.jsx)(p.Z,{editTracker:!0,onDone:this.trackerUpdated,onHide:this.hideDialog})]}):null}}x.contextType=m.a2;const g=x;class f extends i.PureComponent{constructor(e){super(e),this.state=this.getDisplayTime(e)}componentDidMount(){this.props.isRunning&&(this.token=setInterval((()=>this.setState(this.getDisplayTime)),1e3))}getDisplayTime(e){let{lapse:s}=e;s+=1;const t=Math.floor(s/3600),i=Math.floor(s%3600/60),n=Math.floor(s%60);let a;return a=t?`${t.pad(2)}:${i.pad(2)}:${n.pad(2)}`:i?`${i.pad(2)}:${n.pad(2)}`:`${n.pad(2)}s`,{lapse:s,display:a}}componentWillUnmount(){this.token&&clearInterval(this.token)}render(){return(0,d.jsx)("span",{className:"time-lapsed",title:this.props.title,children:this.state.display})}}var k=t(9149),b=t(3860),v=t(816),j=t.n(v),w=t(1649),y=t(3682);const C=!1!==b.default.features.header.shareWithOthers?y.ov:void 0;const N=function({showVersionInfo:e,versionNumber:s}){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(S,{className:"d-lg-none quick-view-hide",display:"md",mobile:!0,children:(0,d.jsx)("span",{className:"fa fa-bars"})}),(0,d.jsx)(c.Z,{href:C,className:"navbar-brand",children:(0,d.jsxs)("span",{className:"navbar-brand-full",children:["Jira Assistant ",(0,d.jsx)("span",{className:"v-info badge badge-success",onClick:e,children:s})]})}),(0,d.jsx)(S,{className:"d-md-down-none quick-view-hide",display:"lg",children:(0,d.jsx)("span",{className:"fa fa-bars"})}),(0,d.jsx)("button",{className:"navbar-toggler quick-view-show",children:(0,d.jsx)(c.Z,{href:k.xn?"/":"/index.html",title:"Open in new tab",children:(0,d.jsx)("span",{className:"fa fa-external-link"})})})]})};function S({className:e,display:s}){const t=i.useCallback((()=>{document.body.classList.toggle(`sidebar-${s}-show`)}),[s]);return(0,d.jsx)("span",{className:e,style:{marginLeft:17,marginRight:17,paddingTop:2,cursor:"pointer"},onClick:t,children:(0,d.jsx)("span",{className:"fa fa-bars"})})}var $=t(2742),U=t(5192),T=t.n(U),I=t(6123),Z=t.n(I),A=t(986),J=["className","cssModule","active","tag"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},L.apply(this,arguments)}function V(e,s){if(null==e)return{};var t,i,n=function(e,s){if(null==e)return{};var t,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],s.indexOf(t)>=0||(n[t]=e[t]);return n}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],s.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var E={active:T().bool,className:T().string,cssModule:T().object,tag:A.iC};function M(e){var s=e.className,t=e.cssModule,n=e.active,a=e.tag,o=void 0===a?"li":a,r=V(e,J),l=(0,A.mx)(Z()(s,"nav-item",!!n&&"active"),t);return i.createElement(o,L({},r,{className:l}))}M.propTypes=E;const D=M;var O=t(53),W=t(7025),P=t(5497),z=t(6047),R=t(6444);function Y(){const{$jaBrowserExtn:e,$analytics:s}=(0,o.f3)("AppBrowserService","AnalyticsService"),t=e.getStoreUrl(!0),i=e.getStoreUrl(),n=encodeURIComponent('Check out "Jira Assistant" in web store'),a=encodeURIComponent(`Check out "Jira Assistant", a open source extension / add-on for your browser from below url:\n\nChrome users: ${y.Fq}?utm_source%3Dgmail#\n\nFirefox users: ${y.Z_}\n\nEdge users: ${y.oP}\n\nOpera users: ${y.El}\n\nUse Web version: ${y.MV}\n\nJira Cloud App: ${y.Qj}\n\nFor source code or to know more about the extension visit: ${y.ov}\n\n\nThis would help you to track your worklog and generate reports from Jira easily with lots of customizations. Also has lot more features like Calendar integration, Jira comment & meeting + worklog notifications, Worklog, Sprint and custom report generations, etc..`),r=encodeURIComponent(i),l=`https://mail.google.com/mail/u/0/?view=cm&tf=1&fs=1&su=${n}&body=${a}`,h=`https://www.linkedin.com/shareArticle?mini=true&url=${r}&title=${n}&summary=${a}&source=`,u=`https://www.facebook.com/sharer/sharer.php?u=${r}&title=${n}&description=${a}`,m=`https://twitter.com/intent/tweet?text=${a}`;return(0,d.jsxs)(O.Z,{nav:!0,direction:"down",onClick:()=>s.trackEvent("Share option viewed",R.Jk.HeaderActions),children:[(0,d.jsx)(W.Z,{nav:!0,children:(0,d.jsx)("i",{className:"fa fa-share-alt"})}),(0,d.jsxs)(P.Z,{end:!0,children:[(0,d.jsx)(z.Z,{header:!0,tag:"div",className:"text-center",children:(0,d.jsx)("strong",{className:"share-header-text",children:"Share or rate this tool"})}),(0,d.jsxs)("div",{className:"share-items",children:[(0,d.jsx)(c.Z,{href:t,title:"Click to rate this tool or add a comment in chrome web store",children:(0,d.jsx)("i",{className:"fa fa-star float-start"})}),(0,d.jsx)(c.Z,{href:l,title:"Share with Gmail",children:(0,d.jsx)("i",{className:"fa fa-envelope float-start"})}),(0,d.jsx)(c.Z,{href:h,title:"Share with Linked in",children:(0,d.jsx)("i",{className:"fa-brands fa-linkedin float-start"})}),(0,d.jsx)(c.Z,{href:u,title:"Share with Facebook",children:(0,d.jsx)("i",{className:"fa-brands fa-facebook-square float-start"})}),(0,d.jsx)(c.Z,{href:m,title:"Share with Twitter",children:(0,d.jsx)("i",{className:"fa-brands fa-twitter-square float-start"})})]})]})]})}const B=i.memo(Y);var H=t(1783),F=t(6848);const _=[{videoId:"xNYNXWUgCeA",module:"Dashboard",route:"dashboard"},{videoId:"Ihz4Dm5oiRk",module:"Worklog Timer",route:"~"},{videoId:"hJBM5X24sPQ",module:"Worklog Calendar",route:"calendar"},{videoId:"WQOHrPBZZiI",module:"Worklog report - Sprint wise",route:"reports/worklog"},{videoId:"TxNH1HQtiX0",module:"Worklog report",route:"userdaywise"},{videoId:"6hAOtUm1lUk",module:"Worklog import",route:"import/worklog"},{videoId:"EFgXFqrGuTI",module:"Issue import",route:"import/issue"},{videoId:"HMyBkaZ09Xw",module:"Report builder",route:"advanced"}],q=[{startAt:713,videoId:"f2aBSXzbYuA",module:"Custom report",route:"customgrouped"},{startAt:1069,videoId:"f2aBSXzbYuA",module:"Settings",route:"settings"},{startAt:1147,videoId:"f2aBSXzbYuA",module:"Feedback",route:"feedback"}];class G extends H.Z{constructor(e){super(e),this.playPrev=()=>{let{index:e}=this.state;e-=1;const s=this.getVideoUrl(this.videoList[e],"Video view previous");this.setState({url:s,index:e})},this.playNext=()=>{let{index:e}=this.state;e+=1;const s=this.getVideoUrl(this.videoList[e],"Video view next");this.setState({url:s,index:e})},this.style={width:"87vw",height:"95vh"},this.className="video-help",this.videoList=[..._],this.setVideoUrl()}setVideoUrl(){const e=this.props.location.pathname.substring(2);let s=_.first((s=>~e.indexOf(s.route)));s||(s=q.first((s=>~e.indexOf(s.route))),s||(s=q[0]),this.videoList.push(s)),this.state.url=this.getVideoUrl(s),this.state.index=this.videoList.indexOf(s)}getVideoUrl(e,s){return this.$analytics.trackEvent(s||"Video help viewed",R.Jk.HeaderActions,`Video Help: ${e.module}`),`https://www.youtube.com/embed/${e.videoId}?rel=0&autoplay=1&showinfo=0&cc_load_policy=1&start=${e.startAt||0}`}render(){const{url:e,index:s}=this.state;return super.renderBase((0,d.jsxs)("div",{className:"video-help",children:[s>0&&(0,d.jsx)("div",{className:"nav-icon left",onClick:this.playPrev,children:(0,d.jsx)("span",{className:"fa fa-angle-left",title:"Play previous video"})}),(0,d.jsx)("iframe",{src:e,id:"ifVideoHelp",title:"Video Help",style:{width:"87vw",height:"95vh"},frameBorder:0,allowFullScreen:!0}),s+1<this.videoList.length&&(0,d.jsx)("div",{className:"nav-icon right",onClick:this.playNext,children:(0,d.jsx)("span",{className:"fa fa-angle-right",title:"Play next video"})})]}))}}const X=(0,F.E)(G);class Q extends i.PureComponent{constructor(e){super(e),this.skinSelected=e=>{const s=e.currentTarget,t=s.attributes.skin.value;this.setSkin(t),document.body.querySelector("#divSkins .selected").classList.remove("selected"),s.classList.add("selected")},(0,o.f3)(this,"SettingsService","AnalyticsService")}async componentDidMount(){var e,s;this.selectedSkin=await this.$settings.get("skin")||"skin-blue",null===(e=document.body.querySelector(`#divSkins [skin="${this.selectedSkin}"]`))||void 0===e||null===(s=e.classList)||void 0===s||s.add("selected")}setSkin(e){const s=e;if(this.selectedSkin===e)return;const t=document.body.classList;t.remove(this.selectedSkin),this.skinClass=s,this.selectedSkin=e,this.$settings.set("skin",e),t.add(this.selectedSkin),this.$analytics.trackEvent("Skin changed",R.Jk.HeaderActions,e)}render(){return(0,d.jsxs)("div",{className:"skin-items",id:"divSkins",children:[(0,d.jsx)("div",{title:"blue",skin:"skin-blue",onClick:this.skinSelected,style:{borderColor:"#367fa9",backgroundColor:"#3c8dbc"},children:"B"}),(0,d.jsx)("div",{title:"purple",skin:"skin-purple",onClick:this.skinSelected,style:{borderColor:"#555299",backgroundColor:"#605ca8"},children:"P"}),(0,d.jsx)("div",{title:"violet",skin:"skin-violet",onClick:this.skinSelected,style:{borderColor:"#7a4889",backgroundColor:"#9055A2"},children:"V"}),(0,d.jsx)("div",{title:"sea",skin:"skin-sea",onClick:this.skinSelected,style:{borderColor:"#2d7776",backgroundColor:"#379392"},children:"S"}),(0,d.jsx)("div",{title:"green",skin:"skin-green",onClick:this.skinSelected,style:{borderColor:"#008d4c",backgroundColor:"#00a65a"},children:"G"}),(0,d.jsx)("div",{title:"red",skin:"skin-red",onClick:this.skinSelected,style:{borderColor:"#d73925",backgroundColor:"#dd4b39"},children:"R"}),(0,d.jsx)("div",{title:"yellow",skin:"skin-yellow",onClick:this.skinSelected,style:{borderColor:"#e08e0b",backgroundColor:"#f39c12"},children:"Y"}),(0,d.jsx)("div",{title:"pink",skin:"skin-pink",onClick:this.skinSelected,style:{borderColor:"#ec2f6c",backgroundColor:"#ef5285"},children:"P"}),(0,d.jsx)("div",{title:"meadow",skin:"skin-meadow",onClick:this.skinSelected,style:{borderColor:"#1caf9a",backgroundColor:"#8cc1a2"},children:"M"}),(0,d.jsx)("div",{skin:"skin-blue2",onClick:this.skinSelected,style:{borderColor:"#557a95",backgroundColor:"#7395ae"},children:"B"}),(0,d.jsx)("div",{skin:"skin-cust8",onClick:this.skinSelected,style:{borderColor:"#64485c",backgroundColor:"#83677b"},children:"M"}),(0,d.jsx)("div",{skin:"skin-green3",onClick:this.skinSelected,style:{borderColor:"#40561a",backgroundColor:"#729a2e"},children:"B"}),(0,d.jsx)("div",{skin:"skin-cust2",onClick:this.skinSelected,style:{borderColor:"#5d5c61",backgroundColor:"#379683"},children:"G"}),(0,d.jsx)("div",{skin:"skin-cust5",onClick:this.skinSelected,style:{borderColor:"#7e685a",backgroundColor:"#afd275"},children:"G"}),(0,d.jsx)("div",{skin:"skin-cust3",onClick:this.skinSelected,style:{borderColor:"#ffe400",backgroundColor:"#747474"},children:"G"}),(0,d.jsx)("div",{title:"dark",skin:"skin-dark",onClick:this.skinSelected,style:{borderColor:"rgba(0,0,0,0.2)",backgroundColor:"#2f353a"},children:"D"})]})}}const K=Q;var ee=t(7544),se=t(6310),te=t(714);class ie extends i.PureComponent{render(){return function(e){if(!e||"string"!==typeof e)return e;const s=[];let t=null,i=0;for(;t=ae.exec(e);){const n=t[0],a=t.index;s.push(e.substring(i,a));const o=n.startsWith("#")?(0,te.BZ)(n):n;s.push((0,d.jsx)(c.Z,{href:o,children:n})),i=a+n.length}i<e.length&&s.push(e.substring(i));return s.length?s:e}(this.props.message)}}const ne=ie,ae=/#\d+|(https?):\/\/(www\.)?[a-z0-9.:].*?(?<!\.\.?)(?=\s|[.]$|$)/g;class oe extends i.PureComponent{constructor(e){super(e),this.readMessage=e=>{let s=e.message,t=null;"versionInfo"===e.type?(t={width:"90vw",maxWidth:"1000px"},s=(0,d.jsx)(u,{updates:this.state.updates_info})):s=(0,d.jsx)(ne,{message:s});const i=()=>this.markRead(e,!0);l.Z.alert(s,e.title,t).then(i,i)},this.markRead=(e,s)=>{if(!e.read){e.read=!0,this.$noti.markRead(e);const t=s?"Viewed":"Mark as read";this.trackAnalytics(e,t),this.setState((e=>({unread:(e.unread||1)-1})))}},this.trackViewList=()=>{const{total:e,unread:s}=this.state;this.$analytics.trackEvent("Messages: List viewed","Messages",`Messages: Total: ${e}, Unread: ${s}`)},(0,se.f3)(this,"NotificationService","AnalyticsService","UserUtilsService","UtilsService");const{updates_info:s,list:t,total:i,unread:n}=e.notifications;this.state={updates_info:s,list:t,total:i,unread:n}}trackAnalytics(e,s){this.$analytics.trackEvent(("versionInfo"===e.type?"Update Info: ":"Message: ")+s,"Messages",`Message Id: ${e.id}`)}render(){const{list:e,total:s,unread:t}=this.state;return e&&e.length?(0,d.jsxs)(O.Z,{nav:!0,direction:"down",children:[(0,d.jsxs)(W.Z,{nav:!0,onClick:this.trackViewList,children:[(0,d.jsx)("i",{className:"fa fa-bell"}),t>0&&(0,d.jsx)("span",{className:"badge badge-danger",children:t})]}),(0,d.jsxs)(P.Z,{end:!0,className:"messages",children:[(0,d.jsx)(z.Z,{header:!0,tag:"div",children:(0,d.jsx)("div",{className:"text-center",children:(0,d.jsxs)("strong",{children:["You have ",t||s," ",t?"unread":""," messages"]})})}),e.map(((e,s)=>(0,d.jsx)(le,{message:e,onOpen:this.readMessage,onRead:this.markRead,cut:this.$utils.cut},s)))]})]}):null}}const re=oe;function le({message:e,onOpen:s,onRead:t,cut:n}){const a=i.useCallback((()=>s(e)),[e,s]),o=i.useCallback((()=>t(e)),[e,t]);return(0,d.jsxs)(z.Z,{tag:"div",title:"Click to view this message",children:[!e.read&&(0,d.jsx)("small",{className:"float-end mt-0",onClick:o,title:"Click to mark this message as read",children:(0,d.jsx)("span",{className:"fa fa-eye mark-read"})}),(0,d.jsxs)("div",{className:"text-truncate"+(e.read?"":" font-weight-bold"),onClick:a,children:[e.important&&(0,d.jsx)("span",{className:"fa fa-exclamation text-danger"})," ",e.title]}),(0,d.jsx)("div",{className:"small text-muted message",onClick:a,children:(0,d.jsx)(ne,{message:n(e.message,175,!0)})})]})}var ce=t(2251);class de extends i.PureComponent{constructor(e){super(e),this.trackViewList=()=>{const{total:e}=this.state;this.$analytics.trackEvent("Jira Updates: List viewed","Updates",`Updates: Total: ${e}`)},(0,se.f3)(this,"JiraUpdatesService","AnalyticsService","UtilsService"),this.state={}}componentDidMount(){this.$jupdates.getRescentUpdates().then((e=>{this.setState(e)}))}trackAnalytics(e,s){this.$analytics.trackEvent(("versionInfo"===e.type?"Update Info: ":"Message: ")+s,"Messages",`Message Id: ${e.id}`)}render(){const{list:e,total:s,ticketCount:t}=this.state;return e&&e.length?(0,d.jsxs)(O.Z,{nav:!0,direction:"down",children:[(0,d.jsxs)(W.Z,{nav:!0,onClick:this.trackViewList,children:[(0,d.jsx)("i",{className:"fa fa-comments"}),s>0&&(0,d.jsx)("span",{className:"badge badge-warning",children:s})]}),(0,d.jsxs)(P.Z,{right:!0,className:"jira-notifications",children:[(0,d.jsx)(z.Z,{header:!0,tag:"div",children:(0,d.jsx)("div",{className:"text-center",children:(0,d.jsxs)("strong",{children:["You have ",s," updates on ",t," issues"]})})}),(0,d.jsx)("div",{className:"noti-messages",children:e.map(((e,s)=>(0,d.jsx)(ue,{message:e,cut:this.$utils.cut},s)))})]})]}):null}}const he=de;class ue extends i.PureComponent{render(){const{message:e,cut:s}=this.props;return(0,d.jsxs)(z.Z,{tag:"a",title:"Click to view this ticket in jira",href:e.href,target:"_blank",children:[(0,d.jsxs)("div",{className:"text-truncate font-weight-bold",title:e.summary,children:[e.key," - ",s(e.summary,100,!0)]}),e.updates.map((({date:e,author:s,field:t,fromString:i,toString:n},a)=>(0,d.jsxs)("div",{className:"small text-muted message",children:[(0,d.jsx)(ce.H,{tag:"span",className:"user-display",user:s}),(0,d.jsxs)("span",{children:[" updated ",t," from ",i," to ",n," "]}),(0,d.jsx)(ce.qm,{tag:"span",className:"date-display",date:e,quick:!0})]},a)))]})}}const me=k.xn?{btnText:"Extn",btnTooltip:"Go back to extension",launchText:"Launch Extension",switchText:"Switch back",launchTooltip:"Launch Jira Assistant extension once",switchTooltip:"Switch back to Jira Assistant extension"}:{btnText:"Web",btnTooltip:"Checkout Jira Assistant Web",launchText:"Launch JA Web",switchText:"Switch to JA Web",launchTooltip:"Launch latest Jira Assistant Web version once",switchTooltip:"Switch to Web version. You can come back later any time."};class pe extends i.PureComponent{constructor(e){super(e),this.switchToWeb=async()=>{await this.$settings.set("useWebVersion",!k.xn||null),window.location.href=this.getLaunchPath()},this.state={switched:!1},(0,o.f3)(this,"SettingsService","AppBrowserService")}async componentDidMount(){if(this.usingExtn=k.xn&&"1"===localStorage.getItem("authType"),k.xn){const e=await this.$jaBrowserExtn.getLaunchUrl("index.html");this.setState({launchUrl:e})}else this.setState({launchUrl:y.fL});const e=await this.$settings.get("useWebVersion");this.setState({switched:e})}getLaunchPath(){const e=this.props.location.pathname;return`${this.state.launchUrl}#${e}`}showOptions(){const{switched:e,launchUrl:s}=this.state;return!!s&&(k.RX||this.usingExtn&&e)}render(){if(!this.showOptions())return null;const e=this.getLaunchPath();return(0,d.jsx)($.Z,{className:"d-md-down-none margin-r-5",navbar:!0,children:(0,d.jsxs)(O.Z,{nav:!0,direction:"down",children:[(0,d.jsx)(W.Z,{nav:!0,children:(0,d.jsxs)("span",{className:"btn btn-success web-try",title:me.btnTooltip,children:[" ",(0,d.jsx)("i",{className:"fa fa-external-link"})," ",(0,d.jsx)("strong",{children:me.btnText})]})}),(0,d.jsxs)(P.Z,{left:!0,children:[(0,d.jsx)(z.Z,{header:!0,tag:"div",className:"text-center",children:(0,d.jsx)("strong",{children:"Jira Assistant Web"})}),(0,d.jsxs)(z.Z,{tag:"a",href:e,target:"_blank",title:me.launchTooltip,children:[(0,d.jsx)("i",{className:"fa fa-external-link"})," ",me.launchText]}),(0,d.jsxs)(z.Z,{tag:"button",title:me.switchTooltip,onClick:this.switchToWeb,children:[(0,d.jsx)("i",{className:"fa fa-plug"})," ",me.switchText]})]})]})})}}const xe=(0,F.E)(pe);var ge=t(5863);const fe=!1!==b.default.features.header.shareWithOthers,ke=!1!==b.default.features.common.allowWebVersion,be=!1!==b.default.features.header.youtubeHelp,ve=!1!==b.default.modules.contactUs;const je=function(e){const{showYoutubeVideo:s,notifications:t,currentJiraInstance:i,showVersionInfo:a,disableJiraUpdates:o,disableNotification:r,showYoutubeHelp:l,userId:c,hideYoutube:h,onLogout:u}=e,{version:m,isBeta:p}=(null===t||void 0===t?void 0:t.updatesAvailable)||{};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)($.Z,{className:"ml-auto",navbar:!0,children:[!k.KX&&(0,d.jsx)(ge.Z,{children:e=>(0,d.jsx)(ee.Z,{instance:i,onLogout:u,onImport:e})}),ke&&!k.yX&&(0,d.jsx)(xe,{}),!!m&&(0,d.jsxs)("span",{className:"update-available badge badge-"+(p?"warning":"success"),title:`Jira Assist ${p?"BETA ":""}v${m} is now available. Click to know more.`,onClick:a,children:[(0,d.jsx)("i",{className:"fa fa-download"})," Updates available"]}),!o&&(0,d.jsx)(he,{}),!r&&t&&(0,d.jsx)(re,{notifications:t}),be&&(0,d.jsx)(D,{className:"d-md-down-none",children:(0,d.jsx)("span",{className:"nav-link",onClick:l,children:(0,d.jsx)("i",{className:"fa-brands fa-youtube"})})}),(0,d.jsxs)(O.Z,{nav:!0,direction:"down",children:[(0,d.jsx)(W.Z,{nav:!0,children:(0,d.jsx)("i",{className:"fa fa-adjust"})}),(0,d.jsx)(P.Z,{end:!0,children:(0,d.jsx)(K,{})})]}),fe&&(0,d.jsx)(B,{}),ve&&(0,d.jsx)(D,{className:"d-md-down-none",children:(0,d.jsx)(n.OL,{to:`/${c}/contactus`,className:"nav-link",children:(0,d.jsx)("i",{className:"fa fa-phone",title:"Contact us"})})})]}),be&&s&&(0,d.jsx)(X,{onHide:h})]})},we=!!b.default.modules.contribute;class ye extends i.PureComponent{constructor(e){var s,t,i,n;super(e),this.showYoutubeHelp=()=>this.setState({showYoutubeVideo:!0}),this.hideYoutube=()=>this.setState({showYoutubeVideo:!1}),this.showVersionInfo=e=>{var s;e.preventDefault();const t=null===(s=this.state.notifications)||void 0===s?void 0:s.updates_info;t&&l.Z.alert((0,d.jsx)(u,{updates:t}),"Updates info",{width:"90vw",maxWidth:"1000px"}).then()},(0,o.f3)(this,"AppBrowserService","SessionService","NotificationService","AnalyticsService","SettingsService");const c=this.$session.CurrentUser;this.disableNotification=!(null!==(s=b.default.features)&&void 0!==s&&null!==(t=s.header)&&void 0!==t&&t.devUpdates)||c.disableDevNotification,this.disableJiraUpdates=!1===(null===(i=b.default.features)||void 0===i||null===(n=i.header)||void 0===n?void 0:n.jiraUpdates)||c.disableJiraUpdates,this.userId=c.userId,this.currentJiraInstance=(0,r._P)(c.jiraUrl),this.state={},this.versionNumber=k.xn?"WEB":`v ${a.Hm}`}componentDidMount(){this.disableNotification||this.$noti.getNotifications().then((e=>this.setState({notifications:e})),(e=>{console.error("Error fetching notifications: ",e)})),this.$session.CurrentUser.hideDonateMenu&&document.body.classList.add("no-donation"),this.validateTimezone()}async validateTimezone(){if(await this.$settings.getSetting(this.userId,R.Jp.General,"ignoreTimezone"))return;const e=j().tz.guess(!0),s=this.$session.CurrentUser.jiraUser.timeZone,t=j().utc(),i=j().tz.zone(e).offset(t),n=j().tz.zone(s).offset(t),a=e=>{const s=e>0;return(e=Math.abs(e))?`GMT ${s?"-":"+"} ${e=parseFloat((e/60).toFixed(2))} hours`:"GMT"};if(i!==n){const t=(e,s)=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w.zx,{type:"danger",icon:"fa fa-times",label:"Ok, Do not check again",onClick:e,waitFor:5}),(0,d.jsx)(w.zx,{type:"success",icon:"fa fa-check",label:"Ok, I will update Jira profile",onClick:s})]});l.Z.custom((0,d.jsxs)("span",{children:["Your system timezone mismatches with Jira profile timezone. This would cause differences in date or time while worklog is being pulled. Ensure you update your Jira profile to match with your local timezone. ",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsxs)("strong",{children:["Jira Profile Timezone: ",s," (",a(n),")",(0,d.jsx)("br",{}),"Your System Timezone: ",e," (",a(i),")"]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),"Any worklogs you already added directly from within Jira would continue to remain same and new worklogs would start using new timezone.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]}),"Timezone mismatch",t,{maxWidth:"80vw",width:"700px"},"dlgTimezoneDiff").then((()=>this.$settings.saveSetting(this.userId,R.Jp.General,"ignoreTimezone",!0)))}}render(){const{state:{showYoutubeVideo:e,notifications:s}}=this;return(0,d.jsxs)("header",{className:"app-header navbar",children:[(0,d.jsx)(N,{showVersionInfo:this.showVersionInfo,versionNumber:this.versionNumber}),we&&(0,d.jsx)(n.OL,{to:`/${this.userId}/contribute`,className:"btn-donate",title:"Would you like to contribute / compensate us for the effort we put in development of this tool? Click to know more",children:(0,d.jsx)("img",{src:"/assets/donate.png",width:"145",className:"margin-r-5",alt:"Donate us"})}),(0,d.jsx)(g,{}),(0,d.jsx)(je,{showYoutubeVideo:e,notifications:s,onLogout:this.props.onLogout,currentJiraInstance:this.currentJiraInstance,showVersionInfo:this.showVersionInfo,disableJiraUpdates:this.disableJiraUpdates,disableNotification:this.disableNotification,showYoutubeHelp:this.showYoutubeHelp,userId:this.userId,hideYoutube:this.hideYoutube})]})}}const Ce=ye}}]);