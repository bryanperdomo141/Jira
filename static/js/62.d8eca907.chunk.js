"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[62],{6680:(e,s,t)=>{t.r(s),t.d(s,{default:()=>U});var i,a,l=t(9584),n=t(6736),d=t.n(n),r=t(5792),o=t(3712),c=t(4324),h=t(9672),u=t(9640),g=t(4568),j=t(9532),x=t(8724),m=t(3460),p=t(7884);const f=!1!==r.default.features.header.devUpdates,b=!1!==r.default.features.common.analytics,v=!1!==r.default.features.common.allowWebVersion,y=!1!==(null===(i=r.default.features)||void 0===i||null===(a=i.header)||void 0===a?void 0:a.jiraUpdates);class S extends l.PureComponent{constructor(e){super(e),this.setValue=(e,s,t)=>{let{users:i,intgUsers:a}=this.state;i=[...i];const l=i.indexOf(t);t={...t},i[l]=t,l>0&&(a=[...a],a[l-1]=t),"string"===typeof e&&(e="jiraUrl"===s?e.trim().clearEnd("/"):e.trim()||void 0),t[s]=e,void 0===t[s]&&delete t[s],this.setState({users:i,intgUsers:a})},this.saveSettings=()=>{const{users:e}=this.state;this.$user.saveGlobalSettings(e).then((()=>{this.loadSettings(),this.$message.success("Settings saved successfully. Some changes will reflect only after you refresh the page.")}))},this.toggleDelete=e=>{e.deleted?this.setValue(!1,"deleted",e):x.c.confirmDelete((0,p.jsxs)(p.Fragment,{children:["Are you sure to delete the selected integration? ",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"This would also delete all the associated data like local Worklogs, Custom Reports, etc."]}),"Confirm delete integration",void 0,{waitFor:8}).then((()=>this.setValue(!0,"deleted",e)))},(0,c.uU)(this,"UserService","SettingsService","MessageService"),this.state={users:[],intgUsers:[]}}componentDidMount(){this.loadSettings()}async loadSettings(){let e=await this.$user.getAllUsers();e=await Promise.all(e.map((async e=>{const{id:s,userId:t,jiraUrl:i,email:a,lastLogin:l}=e;return{id:s,userId:t,jiraUrl:i,email:a,lastLogin:l,...await this.$settings.getAllSettings(e.id,g.sV.Advanced)}}))),e[0].useWebVersion=await this.$settings.get("useWebVersion"),this.setState({users:e,intgUsers:e.slice(1)})}render(){const{state:{users:e,intgUsers:s}}=this;return(0,p.jsxs)("div",{className:"global-settings",children:[(0,p.jsxs)(o._e,{children:[(0,p.jsx)("caption",{children:"Advanced settings"}),(0,p.jsxs)(o.mE,{children:[(0,p.jsxs)(o.qm,{children:[(0,p.jsx)(o.ou,{rowSpan:2,children:"Settings"}),(0,p.jsx)(o.ou,{colSpan:e.length,children:"Instances"})]}),(0,p.jsxs)(o.qm,{children:[(0,p.jsx)(o.ou,{children:"Default"}),s.map((e=>(0,p.jsxs)(o.ou,{children:[(0,h.Sy)(e.jiraUrl),!m.q8&&(0,p.jsx)("span",{className:d()("fa float-end delete-account",e.deleted?"fa-undo":"fa-trash"),title:e.deleted?"Undo delete":"Delete this integration",onClick:()=>this.toggleDelete(e)})]},e.id)))]})]}),(0,p.jsxs)(o.gP,{children:[(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Integrated on"}),(0,p.jsx)("td",{children:"N/A"}),s.map((e=>(0,p.jsx)("td",{children:e.lastLogin.format("dd-MMM-yyyy HH:mm:ss")},e.id)))]}),(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Jira Server Url"}),(0,p.jsx)("td",{children:"N/A"}),s.map((e=>{var s;return(0,p.jsx)("td",{children:(0,p.jsx)(u.SC,{placeholder:"e.g. https://jira.companysite.com",value:null===(s=e.jiraUrl)||void 0===s?void 0:s.toString(),args:e,field:"jiraUrl",onChange:this.setValue,disabled:e.deleted})},e.id)}))]}),(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Jira User id"}),(0,p.jsx)("td",{children:"N/A"}),s.map((e=>(0,p.jsx)("td",{children:(0,p.jsx)(u.SC,{placeholder:"User id of Jira",value:e.userId,args:e,field:"userId",onChange:this.setValue,disabled:e.deleted})},e.id)))]}),(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Email id"}),(0,p.jsx)("td",{children:"N/A"}),s.map((e=>(0,p.jsx)("td",{children:(0,p.jsx)(u.SC,{placeholder:"Email id of Jira",value:e.email,args:e,field:"email",onChange:this.setValue,disabled:e.deleted})},e.id)))]}),(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Open tickets JQL"}),e.map((e=>(0,p.jsx)("td",{children:(0,p.jsx)(u.SC,{multiline:!0,placeholder:g.yu.openTicketsJQL,readOnly:e.id===j.uU,value:e.id===j.uU?g.yu.openTicketsJQL:e.openTicketsJQL||"",args:e,field:"openTicketsJQL",onChange:this.setValue,disabled:e.deleted})},e.id)))]}),(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Ticket suggestions JQL"}),(0,p.jsx)("td",{children:"N/A"}),s.map((e=>(0,p.jsx)("td",{children:(0,p.jsx)(u.SC,{multiline:!0,placeholder:"Provide custom JQL used to filter issues for picker",value:e.suggestionJQL||"",args:e,field:"suggestionJQL",onChange:this.setValue,disabled:e.deleted})},e.id)))]}),y&&(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Disable Jira issue updates"}),e.map((e=>(0,p.jsx)("td",{children:(0,p.jsx)(u.yw,{checked:e.disableJiraUpdates,args:e,field:"disableJiraUpdates",onChange:this.setValue,disabled:e.deleted,label:"Disable Jira issue updates",title:"Do not show updates about changes for any issues happend in Jira"})},e.id)))]}),y&&(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Jira updates JQL (used to fetch updates from Jira)"}),e.map((e=>(0,p.jsx)("td",{children:(0,p.jsx)(u.SC,{multiline:!0,placeholder:g.yu.jiraUpdatesJQL,readOnly:e.id===j.uU,disabled:e.disableJiraUpdates||e.deleted,value:e.id===j.uU?g.yu.jiraUpdatesJQL:e.jiraUpdatesJQL||"",args:e,field:"jiraUpdatesJQL",onChange:this.setValue})},e.id)))]}),v&&!!e[0]&&(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Use Jira Assistant Web version"}),(0,p.jsx)("td",{colSpan:s.length+1,children:(0,p.jsx)(u.yw,{checked:e[0].useWebVersion,args:e[0],field:"useWebVersion",onChange:this.setValue,label:"Opt to always use Web build with latest updates and fixes"})})]}),b&&!!e[0]&&(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Enable tracking user actions (Anonymous, Google Analytics)"}),(0,p.jsx)("td",{colSpan:s.length+1,children:(0,p.jsx)(u.yw,{checked:!1!==e[0].enableAnalyticsLogging,args:e[0],field:"enableAnalyticsLogging",onChange:this.setValue,label:"Help developers to identify what features are being used much"})})]}),b&&!!e[0]&&(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Enable tracking exceptions (Anonymous)"}),(0,p.jsx)("td",{colSpan:s.length+1,children:(0,p.jsx)(u.yw,{checked:!1!==e[0].enableExceptionLogging,args:e[0],field:"enableExceptionLogging",onChange:this.setValue,label:"Help developers to identify what errors occur for users and would help in fixing it soon"})})]}),f&&!!e[0]&&(0,p.jsxs)(o.qm,{children:[(0,p.jsx)("td",{children:"Disable notifications from developer"}),(0,p.jsx)("td",{colSpan:s.length+1,children:(0,p.jsx)(u.yw,{checked:e[0].disableDevNotification,args:e[0],field:"disableDevNotification",onChange:this.setValue,label:"Do not show important information's and bug notifications from developer"})})]})]})]}),(0,p.jsxs)("div",{className:"footer",children:[(0,p.jsx)(u.q,{className:"float-end",icon:"fa fa-save",label:"Save settings",type:"primary",onClick:this.saveSettings}),(0,p.jsx)("strong",{children:"Important Note:"}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:"In the table, the JQL under the 1st (Default) column is non-editable and serves as default information. You can modify the JQL for each integration, starting from the second column onward."}),(0,p.jsx)("li",{children:"Changing these settings may have consequences for application stability or data integrity. Please exercise caution when making adjustments."}),(0,p.jsx)("li",{children:"Some settings may require a refresh or reopening of Jira Assistant to take effect."})]})]})]})}}const U=S}}]);